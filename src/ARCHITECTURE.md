# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ WebcamClassifier

## –û–±–∑–æ—Ä
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `WebcamClassifier` –±—ã–ª —Ä–∞–∑–±–∏—Ç –Ω–∞ –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ö—É–∫–æ–≤ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ ml5.d.ts                 # –¢–∏–ø—ã –¥–ª—è ml5.js –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                 # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ö—É–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ useModel.ts              # –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å ML –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ useCamera.ts             # –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞–º–µ—Ä–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ useStream.ts             # –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∏–¥–µ–æ —Å—Ç—Ä–∏–º–æ–º
‚îÇ   ‚îî‚îÄ‚îÄ usePredictions.ts        # –•—É–∫ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–∞–Ω–∞–ª–∏–∑–∞
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                 # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ModelStatus.tsx          # –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ StreamControls.tsx       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ —Å—Ç—Ä–∏–º–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ CameraControls.tsx       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ VideoDisplay.tsx         # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ –∏ canvas
‚îÇ   ‚îî‚îÄ‚îÄ PredictionsDisplay.tsx   # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ò–ò
‚îú‚îÄ‚îÄ WebcamClassifier.tsx         # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îú‚îÄ‚îÄ WebcamClassifier.refactored.tsx  # –†–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îî‚îÄ‚îÄ ARCHITECTURE.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –•—É–∫–∏ (Custom Hooks)

### useModel
**–§–∞–π–ª**: `hooks/useModel.ts`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–æ–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º ML –º–æ–¥–µ–ª–∏ MobileNet
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `{ loaded: boolean, classifier: any }`

### useCamera
**–§–∞–π–ª**: `hooks/useCamera.ts`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∫ –≤–µ–±-–∫–∞–º–µ—Ä–µ, MediaStream –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Continuity Camera
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: 
```typescript
{
  cameraState: CameraState,
  requestPermission: () => Promise<void>,
  enableCamera: (videoRef) => Promise<void>,
  disableCamera: () => void,
  selectDevice: (deviceId: string) => void,
  refreshDevices: () => Promise<void>,
  loadVideoDevices: () => Promise<VideoDevice[]>
}
```

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- üì± **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ iPhone –∫–∞–º–µ—Ä—ã** —á–µ—Ä–µ–∑ Continuity Camera
- üéØ **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è iPhone —É—Å—Ç—Ä–æ–π—Å—Ç–≤** –≤ —Å–ø–∏—Å–∫–µ –∫–∞–º–µ—Ä
- üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚öôÔ∏è **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–∏–¥–µ–æ** –¥–ª—è iPhone –∫–∞–º–µ—Ä—ã (–¥–æ 1080p)

### useStream
**–§–∞–π–ª**: `hooks/useStream.ts`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–æ–π –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–µ–æ –ø–æ URL
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
```typescript
{
  streamState: StreamState,
  loadStream: (videoRef) => boolean,
  stopStream: (videoRef) => void,
  setUrl: (url: string) => void
}
```

### usePredictions
**–§–∞–π–ª**: `hooks/usePredictions.ts`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ ML –º–æ–¥–µ–ª—å
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
```typescript
{
  analysisState: AnalysisState,
  classifyFrame: (classifier, videoRef, canvasRef, enabled) => Promise<void>,
  clearPredictions: () => void
}
```

### useAutoClassification
**–§–∞–π–ª**: `hooks/usePredictions.ts`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `(enabled, modelLoaded, classifyFrame, interval = 2000)`

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (UI Components)

### ModelStatus
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ ML –º–æ–¥–µ–ª–∏
**–ü—Ä–æ–ø—Å—ã**: `{ modelLoaded: boolean }`

### StreamControls
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–µ–æ
**–ü—Ä–æ–ø—Å—ã**: 
```typescript
{
  streamState: StreamState,
  modelLoaded: boolean,
  onUrlChange: (url: string) => void,
  onLoadStream: () => void,
  onStopStream: () => void
}
```

### CameraControls
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ–±-–∫–∞–º–µ—Ä–æ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—ã–±–æ—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
**–ü—Ä–æ–ø—Å—ã**: 
```typescript
{
  cameraState: CameraState,
  modelLoaded: boolean,
  onRequestPermission: () => void,
  onEnableCamera: () => void,
  onDisableCamera: () => void,
  onSelectDevice: (deviceId: string) => void,
  onRefreshDevices: () => void
}
```

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- üì± **–°–µ–ª–µ–∫—Ç–æ—Ä –≤–∏–¥–µ–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤** —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ –∏–∫–æ–Ω–∫–∞–º–∏ –¥–ª—è iPhone
- üîÑ **–ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤** –¥–ª—è –ø–æ–∏—Å–∫–∞ Continuity Camera
- üí° **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Continuity Camera
- üéØ **–£–º–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** –∞–∫—Ç–∏–≤–Ω–æ–π iPhone –∫–∞–º–µ—Ä—ã

### VideoDisplay
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ –ø–æ—Ç–æ–∫–∞ –∏ –∫–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
**–ü—Ä–æ–ø—Å—ã**: 
```typescript
{
  cameraEnabled: boolean,
  isAnalyzing: boolean,
  modelLoaded: boolean,
  onClassifyFrame: () => void,
  videoRef: RefObject<HTMLVideoElement>,
  canvasRef: RefObject<HTMLCanvasElement>
}
```

### PredictionsDisplay
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ò–ò
**–ü—Ä–æ–ø—Å—ã**: `{ predictions: Prediction[] }`

## –¢–∏–ø—ã (TypeScript Interfaces)

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
```typescript
interface Prediction {
  label: string
  confidence: number
}

interface CameraState {
  enabled: boolean
  stream: MediaStream | null
  permissionGranted: boolean | null
}

interface ModelState {
  loaded: boolean
  classifier: any
}

interface StreamState {
  url: string
  isStreamMode: boolean
}

interface AnalysisState {
  isAnalyzing: boolean
  predictions: Prediction[]
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –ö–∞–∂–¥—ã–π —Ö—É–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –æ–±–ª–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ö—É–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
3. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥—á–µ –ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º
5. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å TypeScript
6. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –∏–∑–º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ

## –ú–∏–≥—Ä–∞—Ü–∏—è

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

1. –ó–∞–º–µ–Ω–∏—Ç–µ –∏–º–ø–æ—Ä—Ç:
   ```typescript
   // –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±
   import { WebcamClassifier } from './WebcamClassifier'
   
   // –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–±
   import { WebcamClassifier } from './WebcamClassifier.refactored'
   ```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω —Ñ–∞–π–ª —Ç–∏–ø–æ–≤ `types/ml5.d.ts`

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ö—É–∫–∞
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `hooks/`
2. –î–æ–±–∞–≤—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç –≤ `hooks/index.ts`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –≥–ª–∞–≤–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `components/`
2. –î–æ–±–∞–≤—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç –≤ `components/index.ts`
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –≥–ª–∞–≤–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ 