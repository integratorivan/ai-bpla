# Функциональность загрузки видеофайлов

## Обзор
Добавлена возможность загрузки и обработки локальных видеофайлов с помощью drag & drop или стандартного диалога выбора файла.

## Новые компоненты и возможности

### 1. Обновленные типы (src/types/ml5.d.ts)
- Добавлено `isFileMode: boolean` в `StreamState`
- Добавлено `currentFile: File | null` для хранения загруженного файла
- Добавлено `fileName: string` для отображения имени файла
- Новый интерфейс `DragState` для управления состоянием drag & drop

### 2. Расширенный хук useStream (src/hooks/useStream.ts)
- Новая функция `loadFile(videoRef, file)` для загрузки локальных файлов
- Поддержка создания Object URL для локальных файлов
- Валидация типов файлов (только видео)
- Автоматическое освобождение памяти через `URL.revokeObjectURL()`

### 3. Новый компонент FileUpload (src/components/FileUpload.tsx)
- Полноценная drag & drop функциональность
- Визуальная обратная связь при перетаскивании файлов
- Кнопка для стандартного диалога выбора файла
- Отображение информации о загруженном файле (имя, размер, тип)
- Валидация типов файлов

### 4. Обновленный основной компонент (src/WebcamClassifier.refactored.tsx)
- Интеграция нового компонента FileUpload
- Обновленные обработчики для работы с файлами
- Улучшенная логика переключения между источниками видео

## Пользовательский интерфейс

### Drag & Drop зона
- Стильная область для перетаскивания файлов
- Анимированная обратная связь при наведении и перетаскивании
- Визуальные подсказки о поддерживаемых форматах

### Информация о файле
- Отображение имени, размера и типа загруженного файла
- Кнопка для удаления файла

### Стили (src/app.css)
- Полный набор CSS стилей для drag & drop функциональности
- Адаптивный дизайн
- Анимации и переходы
- Состояния disabled для заблокированного интерфейса

## Поддерживаемые форматы
- MP4
- WebM
- MOV
- AVI
- Любые другие видеоформаты, поддерживаемые браузером

## Функциональность
1. **Drag & Drop**: Перетащите видеофайл в специальную зону
2. **Click to upload**: Кликните по зоне для открытия диалога выбора файла
3. **Автоматическая валидация**: Проверка типов файлов
4. **Память управление**: Автоматическое освобождение Object URL
5. **Визуальная обратная связь**: Анимации и статусы загрузки

## Интеграция с существующей системой
- Полная совместимость с камерой и стримами
- Автоматическое переключение между источниками
- Очистка предсказаний при смене источника
- Использование существующей системы классификации ml5.js

## Техническая реализация
- TypeScript для типобезопасности
- Preact хуки для управления состоянием
- File API для работы с локальными файлами
- Object URL для создания ссылок на файлы
- Canvas API для извлечения кадров из видео 